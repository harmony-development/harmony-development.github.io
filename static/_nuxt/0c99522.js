(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{418:function(t,e,n){var content=n(507);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("65a31636",content,!0,{sourceMap:!1})},446:function(t,e,n){"use strict";n.r(e);var o=n(0).a.extend({data:function(){return{password:"",confirmPassword:""}},methods:{onEdited:function(){this.password===this.confirmPassword?this.$emit("input",this.password):this.$emit("input",void 0)}}}),r=n(59),c=n(70),l=n.n(c),d=n(470),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{staticClass:"mt-2",attrs:{type:"password","hide-details":"auto",outlined:"",label:t.$i18n.t("auth.password")},on:{input:t.onEdited},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{staticClass:"mt-2",attrs:{type:"password","hide-details":"auto",outlined:"",label:t.$i18n.t("auth.confirm-password")},on:{input:t.onEdited},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VTextField:d.a})},506:function(t,e,n){"use strict";n(418)},507:function(t,e,n){(e=n(26)(!1)).push([t.i,".loading-root[data-v-2acf6c9d]{width:100%;display:flex;justify-content:center;align-content:center}.choice-root[data-v-2acf6c9d]{width:100%}.choice-item[data-v-2acf6c9d]{border-radius:4px}",""]),t.exports=e},604:function(t,e,n){"use strict";n.r(e);n(14),n(202),n(41),n(37);var o=n(5),r=n(200),c=n(210),l=n(0),d=n(446),f=l.a.extend({components:{NewPassword:d.default},data:function(){return{loading:!0,canGoBack:!1,conn:void 0,authID:void 0,stepType:void 0,choiceTitle:void 0,choices:[],formTitle:void 0,formFields:void 0,formFieldValues:void 0}},computed:{allFieldsFilled:function(){return this.formFieldValues.every((function(t){return!!t}))}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.conn=new r.Connection(t.$getHost()),t.conn.events.addListener("auth-event",t.onAuthStep,{}),t.conn.events.addListener("auth-disconnect",t.onAuthDisconnect,{}),e.next=5,t.conn.beginAuth();case 5:return n=e.sent,t.authID=n.message.getAuthId(),e.next=9,t.conn.streamSteps(t.authID);case 9:return e.next=11,t.conn.nextAuthStep(t.authID);case 11:o=e.sent,t.loading=!1,t.onAuthStep(t.conn.host,o.message.toObject());case 14:case"end":return e.stop()}}),e)})))()},methods:{onAuthStep:function(t,e){if(this.loading=!0,this.canGoBack=e.canGoBack,e.choice)this.stepType="choice",this.choiceTitle=e.choice.title,this.choices=e.choice.optionsList;else if(e.form)this.stepType="form",this.formTitle=e.form.title,this.formFields=e.form.fieldsList,this.formFieldValues=this.formFields.map((function(t){return"number"===t.type?0:""}));else if(e.session)if(this.$accessor.app.setUserID(e.session.userId),this.$accessor.app.setSession(e.session.sessionToken),this.$accessor.app.setHost(this.$getHost()),void 0!==this.$accessor.entry.pendingInvite){var n=this.$accessor.entry.pendingInvite;this.$accessor.entry.setPendingInvite(void 0),this.$router.push({path:"/join/".concat(n.host,"/").concat(n.id)})}else this.$router.push({path:"/app"});this.loading=!1},onAuthDisconnect:function(t,e,n){console.log("disconnected")},selectChoice:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.conn&&e.authID){n.next=2;break}return n.abrupt("return");case 2:return(o=new c.NextStepRequest.Choice).setChoice(t),n.next=6,e.conn.nextAuthStep(e.authID,{choice:o});case 6:case"end":return n.stop()}}),n)})))()},formSubmitted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.conn&&t.authID&&t.formFieldValues){e.next=2;break}return e.abrupt("return");case 2:return(n=new c.NextStepRequest.Form).setFieldsList(t.formFieldValues.map((function(e,i){var n,o,r,l=new c.NextStepRequest.FormFields;return"number"===(null===(n=t.formFields)||void 0===n?void 0:n[i].type)?l.setNumber(e):"password"===(null===(o=t.formFields)||void 0===o?void 0:o[i].type)||"new-password"===(null===(r=t.formFields)||void 0===r?void 0:r[i].type)?l.setBytes(btoa(e)):l.setString(e),l}))),e.next=6,t.conn.nextAuthStep(t.authID,{form:n});case 6:case"end":return e.stop()}}),e)})))()},stepBack:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.conn&&t.authID){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.conn.stepBack(t.authID);case 4:case"end":return e.stop()}}),e)})))()}}}),h=(n(506),n(59)),m=n(70),v=n.n(m),w=n(366),x=n(387),k=n(378),y=n(172),F=n(470),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"loading-root"},[t.loading?n("v-progress-circular",{attrs:{indeterminate:""}}):t._e()],1),"choice"===t.stepType?n("div",{staticClass:"choice-root"},[n("h3",[t._v(t._s(t.$i18n.t("auth."+t.choiceTitle)))]),n("v-list",{staticClass:"mt-2",attrs:{color:"var(--harmony-dark-500)"}},t._l(t.choices,(function(e){return n("v-list-item",{key:e,staticClass:"choice-item mr-2 ml-2",attrs:{link:""},on:{click:function(n){return t.selectChoice(e)}}},[t._v(t._s(t.$i18n.t("auth."+e)))])})),1),n("div",{staticClass:"d-flex justify-end"},[n("v-btn",{staticClass:"mt-2",attrs:{color:"primary",text:"",disabled:!t.canGoBack},on:{click:t.stepBack}},[t._v(t._s(t.$i18n.t("back")))])],1)],1):t._e(),"form"===t.stepType?n("div",{staticClass:"formRoot"},[n("h3",[t._v(t._s(t.$i18n.t("auth."+t.formTitle)))]),n("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmitted(e)}}},[t._l(t.formFields||[],(function(e,o){return n("div",{key:e.name},["new-password"===e.type?n("new-password",{model:{value:(t.formFieldValues||[])[o],callback:function(e){t.$set(t.formFieldValues||[],o,e)},expression:"(formFieldValues || [])[idx]"}}):n("v-text-field",{staticClass:"mt-2",attrs:{outlined:"",type:e.type,"hide-details":"auto",label:t.$i18n.t("auth."+e.name)},model:{value:(t.formFieldValues||[])[o],callback:function(e){t.$set(t.formFieldValues||[],o,e)},expression:"(formFieldValues || [])[idx]"}})],1)})),n("div",{staticClass:"d-flex justify-end"},[n("v-btn",{staticClass:"mt-2 mr-2",attrs:{color:"primary",text:"",disabled:!t.canGoBack},on:{click:t.stepBack}},[t._v(t._s(t.$i18n.t("back")))]),n("v-btn",{staticClass:"mt-2",attrs:{type:"submit",color:"primary",disabled:!t.allFieldsFilled}},[t._v(t._s(t.$i18n.t("done")))])],1)],2)]):t._e()])}),[],!1,null,"2acf6c9d",null);e.default=component.exports;v()(component,{NewPassword:n(446).default}),v()(component,{VBtn:w.a,VList:x.a,VListItem:k.a,VProgressCircular:y.a,VTextField:F.a})}}]);